<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="assets/css/fontawesome.css">
</head>

<body>


    <!-- HTML -->
    <!-- <button id="favorite-btn" data-product-id="123" data-favorite01="false">Add to Favorites</button> -->
    <span id="cart-btn-1" data-product-id="123" data-cart="true"><a class="btn btn-success text-white"><i class="fas fa-shopping-cart"></i></a></span>
    <span id="cart-btn-2" data-product-id="456" data-cart="false"><a class="btn btn-success text-white"><i class="fas fa-shopping-cart"></i></a></span>
    <span id="cart-btn-3" data-product-id="789" data-cart="false"><a class="btn btn-success text-white"><i class="fas fa-shopping-cart"></i></a></span>
    
    <!-- 
    HTML部分：

<button id="favorite-btn" data-product-id="123" data-favorite="false">Add to Favorites</button>：這是一個HTML按鈕元素，其中id屬性是按鈕的唯一識別符，data-product-id屬性是產品的識別符，data-favorite屬性表示該產品是否已經是最愛。按鈕的文本內容可以自定義。
 -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
        const buttons1 = document.querySelectorAll('[id^="cart-btn"]'); // 選擇所有id以"cart-btn"開頭的按鈕
        buttons1.forEach(button1 => {
            let isCart = button1.dataset.cart === 'true'; // 從data屬性獲取按鈕的購物車狀態
            console.log(isCart);
            
            // 初始化按鈕狀態
            updateButtonState(button1, isCart);

            button1.addEventListener('click', function () {
                // 點擊按鈕時切換購物車狀態
                isCart = !isCart;//將!isCart反轉往回丟
                button1.dataset.cart = isCart.toString(); // 將已經更新的isCart用toString()的方式回丟給html
                
                // 更新按鈕狀態
                updateButtonState(button1, isCart);
                
                // 根據狀態執行相應的操作
                const cartproductId = button1.getAttribute('data-product-id'); // 獲取產品ID
                if (isCart) {
                    console.log('Adding product to cart:', cartproductId);
                    // 在這裡執行新增到購物車的相應操作
                } else {
                    console.log('Removing product from cart:', cartproductId);
                    // 在這裡執行從購物車中刪除的相應操作
                }
            });
        });

        // 函數：更新按鈕狀態
        function updateButtonState(btn, isCart) {
            const heartIcon = btn.querySelector('i');

            // 根據購物車狀態切換圖標
            if (isCart) {
                heartIcon.classList.remove('fas', 'fa-shopping-cart');
                heartIcon.classList.add('fas', 'fa-cart-plus');
            } else {
                heartIcon.classList.remove('fas', 'fa-cart-plus');
                heartIcon.classList.add('fas', 'fa-shopping-cart');
            }
        }
    });

        // document.addEventListener('DOMContentLoaded', function () {
        //     const buttons1 = document.querySelectorAll('[id^="cart-btn"]'); // 選擇所有id以"favorite-btn"開頭的按鈕
        //     buttons1.forEach(button1 => {
        //         let isCart = button1.dataset.cart === 'true'; // 從data屬性獲取按鈕的最愛狀態
        //         console.log(isCart);
        //         button1.addEventListener('click', function () {
        //             const cartproductId = button1.getAttribute('data-product-id'); // 獲取產品ID

        //             // 根據按鈕的最愛狀態執行相應的操作
        //             if (isCart) {
        //                 removeFavorite(cartproductId);
        //             } else {
        //                 addFavorite(cartproductId);
        //             }
        //         });

        //         // 函數：發送請求新增最愛
        //         function addFavorite(cartproductId) {
        //             // 處理新增最愛的邏輯
        //             console.log('Adding product to cart:', cartproductId);
        //             isCart = true;
        //             updateButtonState(button1);
        //         }

        //         // 函數：發送請求刪除最愛
        //         function removeFavorite(cartproductId) {
        //             // 處理刪除最愛的邏輯
        //             console.log('Removing product from cart:', cartproductId);
        //             isCart = false;
        //             updateButtonState(button1);
        //         }

        //         // 函數：更新按鈕狀態
        //         // 函數：更新按鈕圖標
        //         function updateButtonState(btn) {
        //             const heartIcon = btn.querySelector('i');

        //             // 如果是最愛，切換到實心心形圖標
        //             if (isCart) {
        //                 heartIcon.classList.remove('fas', 'fa-shopping-cart');
        //                 heartIcon.classList.add('fas', 'fa-cart-plus');
        //             } else { // 如果不是最愛，切換到空心心形圖標
        //                 heartIcon.classList.remove('fas', 'fa-cart-plus');
        //                 heartIcon.classList.add('fas', 'fa-shopping-cart');
        //             }
        //         }

        //     });
        // });

        // document.addEventListener('DOMContentLoaded', function() {
        //     // 獲取按鈕元素
        //     const favoriteBtn = document.getElementById('favorite-btn');
        //     const productId = favoriteBtn.getAttribute('data-product-id');
        //     let isFavorite = favoriteBtn.getAttribute('data-favorite01') === 'true';
        //     //const isFavorite = favoriteBtn.dataset.favorite01 === 'true';也可以這樣寫
        //     // 根據產品是否是最愛設置按鈕狀態
        //     updateButtonState();

        //     // 監聽按鈕點擊事件
        //     favoriteBtn.addEventListener('click', function() {
        //         // 如果產品是最愛，則發送請求刪除最愛，否則發送請求新增最愛
        //         if (isFavorite) {
        //             removeFavorite(productId);
        //         } else {
        //             addFavorite(productId);
        //         }
        //     });

        //     // 函數：更新按鈕狀態
        //     function updateButtonState() {
        //         if (isFavorite) {
        //             favoriteBtn.textContent = 'Remove from Favorites';
        //         } else {
        //             favoriteBtn.textContent = 'Add to Favorites';
        //         }
        //     }

        //     // 函數：發送請求新增最愛
        //     function addFavorite(productId) {
        //         // 假設發送 AJAX 請求到後端，成功後將 isFavorite 設為 true，並更新按鈕狀態
        //         // 這裡只是示例，實際中需要根據後端 API 來實現
        //         // AJAX 請求的程式碼省略
        //         console.log('Adding product to favorites:', productId);
        //         isFavorite = true;
        //         updateButtonState();
        //     }

        //     // 函數：發送請求刪除最愛
        //     function removeFavorite(productId) {
        //         // 假設發送 AJAX 請求到後端，成功後將 isFavorite 設為 false，並更新按鈕狀態
        //         // 這裡只是示例，實際中需要根據後端 API 來實現
        //         // AJAX 請求的程式碼省略
        //         console.log('Removing product from favorites:', productId);
        //         isFavorite = false;
        //         updateButtonState();
        //     }
        // });
    </script>
</body>

</html>